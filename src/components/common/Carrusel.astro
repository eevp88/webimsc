---
import ItemCarrusel from '@/components/common/ItemCarrusel.astro';
export interface Props {
    items?: ImageMetadata[];
}
const {
  items = [],
} = Astro.props;
console.log(items);
---
<section class="relative md:-mt-[76px] not-prose" id ='carrusel_index'>
    <div class="absolute inset-0 pointer-events-none" aria-hidden="true"></div>
        <div class="py-12 md:py-20">
            <div class="text-center pb-10 md:pb-16 max-w-5xl mx-auto slider">
              {
                items.map((item,i) =>{
                  <ItemCarrusel
                    item={item}
                    id={i}
                  />
                })
              }
            </div>
            <div style="background: radial-gradient(ellipse 80% 80% at 50% -20%,#7877c64d,#fff0); position: absolute; top: 0; width: 100%; height: 100%; left:0; z-index: -1"></div>
            <ul class="markers">
              {
                items.map((item,i) =>{
                  <li><a href={`#img_${i}`}></a></li>
                })
              }
            </ul>

        </div>
    </div>
</section>

<style>
    section #carrusel_index {
      timeline-scope: --carousel;
    }
    .markers li:nth-child(1) {
      --i: 1;
    }
    .markers li:nth-child(2) {
      --i: 2;
    }
    .markers li:nth-child(3) {
      --i: 3;
    }
    .markers li:nth-child(4) {
      --i: 4;
    }
    .slider {
      scroll-timeline: --carousel x;
      display: flex;
      flex-direction: row;
      border-radius: 4px;
      width: 80%;
      aspect-ratio: 16/9;
      scroll-snap-type: x mandatory;
      overscroll-behavior: contain;
      scroll-behavior: smooth;
      overflow-x: hidden;
      overflow-y: hidden;
      box-shadow: 0px 0px 50px 10px rgba(255, 255, 255, .1);
    }
    .markers a {
      display: block;
      width: 16px;
      aspect-ratio: 1;
      background: white;
      opacity: .7;
      border-radius: 50%;
      animation: activate linear;
      animation-timeline: --carousel;
      animation-range: calc((var(--i) - 1) * 25%) calc(var(--i) * 25% + 1px);
    }
    @keyframes activate {
      0%,
      100% {
        background: #09f;
        opacity: 1;
      }
    }
    .slider a {
      flex: 0 0 100%;
      width: 100%;
      scroll-snap-align: center;
    }
    .slider img {
      object-fit: cover;
      width: 100%;
    }
    
    .markers {
      display: flex;
      flex-direction: row;
      gap: 0.25em;
      list-style: none;
      font-size: 2em;
      position: absolute;
      bottom: 5rem;
      left: 50%;
      translate: -50% 0;
    }
    </style>